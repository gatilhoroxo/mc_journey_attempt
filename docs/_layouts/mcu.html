<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
</head>
<body>
  <button id="sidebar-toggle" class="sidebar-toggle" aria-label="Toggle sidebar">
    <span class="toggle-icon">â˜°</span>
  </button>

  {% include sidebar.html %}
  {% include header.html %}
  
  <main>
    <article class="mcu-page">
      <header class="mcu-header">
        <h1>{{ page.title }}</h1>
        
        <div class="mcu-meta">
          <span class="badge badge-mcu">{{ page.mcu_type | upcase }}</span>
        </div>
        
        {% if page.description %}
        <p class="mcu-description">{{ page.description }}</p>
        {% endif %}
      </header>
      
      <div class="mcu-content">
        {{ content }}
      </div>
      
      {% if page.datasheet %}
      <footer class="mcu-footer">
        <a href="{{ page.datasheet }}" target="_blank" class="btn-datasheet">ðŸ“„ Ver Datasheet Completo</a>
      </footer>
      {% endif %}
    </article>
  </main>
  
  {% include footer.html %}
  
  <script>
    // Theme Toggle Script
    const themeToggle = document.getElementById('theme-toggle');
    const currentTheme = localStorage.getItem('theme') || 'dark';
    
    document.documentElement.setAttribute('data-theme', currentTheme);
    themeToggle.textContent = currentTheme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
    
    themeToggle.addEventListener('click', () => {
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      themeToggle.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ðŸŒ™';
    });

    // Sidebar Toggle Script
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebar-toggle');
    const body = document.body;
    
    const sidebarState = localStorage.getItem('sidebarCollapsed');
    if (sidebarState === 'true') {
      sidebar.classList.add('collapsed');
      body.classList.add('sidebar-collapsed');
    }
    
    sidebarToggle.addEventListener('click', () => {
      sidebar.classList.toggle('collapsed');
      sidebar.classList.toggle('mobile-open');
      body.classList.toggle('sidebar-collapsed');
      localStorage.setItem('sidebarCollapsed', sidebar.classList.contains('collapsed'));
    });

    if (window.innerWidth <= 768) {
      document.querySelectorAll('.sidebar a').forEach(link => {
        link.addEventListener('click', () => {
          sidebar.classList.remove('mobile-open');
        });
      });
    }
  </script>
</body>
</html>
